<!DOCTYPE html>
<html lang="en">
<head>
    <title>XML Classroom</title>

    <!-- OpenSave Javascript reference -->
	

    <link href="MetroStyle/default.css" rel="stylesheet" />
    <style type="text/css" media="screen">
        #editor { 
        position: absolute;
        top: 100px;
        right: 0;
        bottom: 0;
        left: 0;
        }

        .toolbar {
            padding:0px;
            border:1px solid black;
            background-color:lightgray;
            width:100%;
        }

        .toolbarButton {
            padding:0px;
            border:0px solid black;
            width:55px;
            text-align:center;
            vertical-align:central;
        }

        .about {
            position: absolute;
        top: 300px;
        right: 300px;
        bottom: 300px;
        left: 300px;
        visibility:hidden;
        }
       
   
    </style>
 
</head>
<body onload="loadScreen()">
    <div>
        <div>
            <div>
                <div><img src="images/header-logo.png" /></div>
                <table class="toolbar">
                    <tr style="height:5px"></tr>
                    <tr>
                        <td style="width:25px"></td>
                        <td class="toolbarButton"><img src="images/new.png" onclick="fileNew()"/></td>
                        <td style="width:5px"></td>
                        <td class="toolbarButton"><div id="openImageButton"/></td>
                        <td style="width:5px"></td>
                        <td class="toolbarButton"><div id="saveImageButton"/></td>
                        <td style="width:25px"></td>
                        <!-- <td class="toolbarButton"><img src="images/copy.png" /></td>
                        <td style="width:5px"></td>
                        <td class="toolbarButton"><img src="images/paste.png" /></td>
                        <td style="width:25px"></td>-->
                        <td class="toolbarButton"><img src="images/about.png" onclick="helpAbout()"/></td>
                        <td style="width:auto"></td>
                    </tr>
                     <tr style="height:5px"></tr>
                </table>
                

            </div>
        </div>
        <div>
            <div>
                <div id="editor"></div>

            </div>
        </div>
    </div>
    <textarea rows="4" cols="20" id="textFieldData" style="visibility:hidden">This is the data to save.</textarea>
    
    
    
            
            
    
    
    
    <!-- Ace Editor Included Scripts -->
    <script src="/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/eclipse");
        editor.getSession().setMode("ace/mode/xml");
        editor.setShowPrintMargin(false);
    </script>
    
    <!-- OpenSave Included Scripts -->
    <script src="opensave.js" type="text/javascript"></script>
    <script>


        // -------------------------------------------------------------------
        // Open textfield button 
        // -------------------------------------------------------------------
        // Loads a local text-based file into the textfield box on the page.
        var vOpenButtonId = opensave.make({ kind: 		"open", 
                                            width: 		65,
                                            height: 	30,
                                            image_up: "images/open.png",
                                            image_down: "images/open.png",
                                            image_over: "images/open.png",
                                            buttonDiv: 	"openImageButton",
                                            dataID: 	"textFieldData"
        });

        


        // -------------------------------------------------------------------	
        // Save textfield button
        // -------------------------------------------------------------------
        // Saves the text in the textarea to a local file on the users's PC.

        

        var vSaveButtonId = opensave.make({
            width: 65,
            height: 30,
            label: "",
            //textColor: "#FFFFFF",
            //textSize: 1,
            image_up: "images/save.png",
            image_down: "images/save.png",
            image_over: "images/save.png",
            filename: "default.xml",
            buttonDiv: "saveImageButton",
            dataID: "textFieldData"
        }
			);

       
        function loadScreen() {
            if (sessionStorage.getItem("editorText")) {
                editor.setValue(sessionStorage.getItem("editorText"),1);
            } else {
                editor.setValue("<?xml version='1.0' encoding='UTF-8'?>", 1);
            }

            //opensave.editor = editor;
            //bulkCopy();
        }

        //function bulkCopy() {
        //    textFieldData.value = editor.getValue();
        //}

        editor.getSession().on('change', function (e) {
            sessionStorage.setItem("editorText", editor.getValue());
        });

        function fileNew() {
            editor.setValue("<?xml version='1.0' encoding='UTF-8'?>", 1);
        }

        function helpAbout() {
            alert("XmlClassroom\nCopyright(c)2012-Present\nJoel J. Byford\nadmin@xmlclassroom.org");
        }

    </script>



</body>
</html>